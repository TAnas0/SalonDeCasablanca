---
import Layout from '../layouts/Layout.astro';
import { getCollection, getEntry } from 'astro:content';

let allArtists = await getCollection('artists');
allArtists = allArtists.map(artist => {
  return {
    ...artist,
  }
})
---

<Layout title="Le Salon de Casablanca - Édition 2025">
  <section class="mx-auto px-4 py-12">
    <!-- {JSON.stringify(allArtists, null, 4)}
    {allArtists.length} -->
    <div class="flex justify-between mb-2 border-b-2 border-black">
      <h2 class="text-left text-3xl font-bold text-gray-900">
        Comité Curatorial
      </h2>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-3 gap-4 p-4 mb-8">
      {Array.from({ length: 6 }).map((_, i) => (
        
        <div class="p-4 border">
          <img src="https://placehold.co/200" alt="placeholder" class="float-left mr-4 mb-2" width="200" height="200"/>
          <p>
            <h2 class="text-lg italic underline">Jon Doe</h2>
            This is some sample text that wraps around the image. The image stays pinned
            to the top-left, while text flows beside it and continues underneath.
            This is some sample text that wraps around the image. The image stays pinned
            to the top-left, while text flows beside it and continues underneath.
            This is some sample text that wraps around the image. The image stays pinned
            to the top-left, while text flows beside it and continues underneath.
            This is some sample text that wraps around the image. The image stays pinned
            to the top-left, while text flows beside it and continues underneath.
            This is some sample text that wraps around the image. The image stays pinned
            to the top-left, while text flows beside it and continues underneath.
            This is some sample text that wraps around the image. The image stays pinned
            to the top-left, while text flows beside it and continues underneath.
          </p>
        </div>
      ))}
    </div>

    <div class="flex justify-between border-b-2 border-black mb-2">
      <h2 class="text-left text-3xl font-bold text-gray-900">
        La Selection
      </h2>
    </div>

    <div class="grid gap-1 grid-cols-2 md:grid-cols-4">

      {allArtists.map((artist, idx) => (
        <a href={`/artists/${artist.data.slug}`} class="w-full h-full" target="_blank">
        <div
          class={`group relative min-h-96 cursor-pointer border overflow-hidden fade-in-slide-from-right`}
        >
          <div class="absolute w-full h-full">
            <img
              src={artist.data.profile}
              alt={`Artwork by ${artist.data.name}`}
              loading="lazy"
              class="w-full h-full object-cover object-center"
            />
          </div>
    
          <div class="absolute bottom-4 left-4 text-gray-50 p-2 bg-gray-700/75 rounded-md z-50">
            <h3 class="text-3xl font-semibold mb-1">{artist.data.name}</h3>
            <p class="text-md">{artist.data.medium}</p>
          </div>
    
          {artist.data.images.map((img: string, i: number) => (
            <img
              src={img}
              alt=""
              class={`absolute inset-0 w-full h-full object-cover object-center opacity-0 group-hover:opacity-100 transition-opacity duration-${1000 + i * 500} z-10`}
            />
          ))}
    
          {/* <img
            src={artist.data.profile}
            alt={`${artist.data.name} profile`}
            class="rounded-md absolute top-0 left-0 w-1/3 h-full object-cover object-center opacity-0 group-hover:opacity-100 transition-opacity duration-1000 z-20"
          /> */}
        </div>
        </a>
      ))}
      <!-- {artists.map((artist, idx) => (
        <div
          class={`group relative min-h-96 cursor-pointer border overflow-hidden fade-in-slide-from-${idx % 2 === 0 ? 'left' : 'right'}`}
        >
          <div class="absolute w-full h-full">
            <img
              src={artist.featured}
              alt={`Artwork by ${artist.name}`}
              loading="lazy"
              class="w-full h-full object-cover object-center"
            />
          </div>
    
          <div class="absolute bottom-4 left-4 text-gray-50 p-2 bg-gray-700/75 rounded-md z-50">
            <h3 class="text-3xl font-semibold mb-1">{artist.name}</h3>
            <p class="text-md">{artist.medium}</p>
          </div>
    
          {artist.images.map((img, i) => (
            <img
              src={img}
              alt=""
              class={`absolute inset-0 w-full h-full object-cover object-center opacity-0 group-hover:opacity-100 transition-opacity duration-${1000 + i * 500} z-10`}
            />
          ))}
    
          <img
            src={artist.profile}
            alt={`${artist.name} profile`}
            class="rounded-md absolute top-0 left-0 w-1/3 h-full object-cover object-center opacity-0 group-hover:opacity-100 transition-opacity duration-1000 z-20"
          />
        </div>
      ))} -->
    </div>


    <!-- <button data-micromodal-trigger="modal-1">Open</button> -->

    <!-- <ArtModal artist={artists[0]}/>
    <ArtModal artist={artists[1]}/>
    <ArtModal artist={artists[2]}/>
    <ArtModal artist={artists[3]}/>
    <ArtModal artist={artists[4]}/>
    <ArtModal artist={artists[5]}/>
    <ArtModal artist={artists[6]}/> -->
  </section>
</Layout>
